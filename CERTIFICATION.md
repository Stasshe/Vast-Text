# Vast-Text Editor - 技術仕様書

## プロジェクト概要

Vast-Text Editorは、大量のテキストや文書をスムーズに編集できる軽量ウェブアプリケーションです。GitHub Codespaceのコードエディタのような使い心地と機能性を備えながら、シンプルで使いやすいインターフェースを提供します。何よりも使いやすさを重視。Safariでの使用を標準、推奨とします。

nextJsを使うとuseEffect系の問題で、ややこしくなるので使わないように。

## 主要機能

- **軽量かつ高速**: 非常に長い文書でも遅延なく編集可能
- **インライン行ナビゲーター**: 右側に縮小された行プレビューを表示し、素早いナビゲーションを実現
- **ローカルストレージ**: IndexedDBを使用したクライアントサイドでのデータ保存
- **シングルページアプリケーション**: 読み込み後の画面遷移なし
- **折りたたみ可能なサイドバー**: 必要に応じて表示/非表示の切り替え可能
- **キーボードショートカット**: alt+矢印での行の上下移動など、ios標準でないショートカットの追加

## 技術スタック


- **言語**: TypeScript
- **スタイリング**: Tailwind CSS
- **データ保存**: IndexedDB (Dexie.js)
- SPA

## アーキテクチャ設計

### データモデル
```typescript
interface Document {
  id: string;
  title: string;
  content: string;
  lastModified: Date;
  created: Date;
}
```

### ストレージ層
- IndexedDBを使用した永続ストレージ
- Dexie.jsによる抽象化
- キャッシュメカニズムによるパフォーマンス最適化

### UIコンポーネント
1. **エディタメイン**: CodeMirror 6をベースとした高性能エディタ
2. **ミニマップ**: 右側に表示される縮小文書ビュー
3. **サイドバー**: 折りたたみ可能なドキュメント管理パネル
4. **ツールバー**: 最小限の機能を備えたエディタコントロール

## パフォーマンス最適化

- **仮想化**: 大きなドキュメントの表示時に仮想スクロールを実装
- **遅延読み込み**: 必要なコンポーネントのみを読み込み
- **メモ化**: 不要な再レンダリングを防止
- **Webワーカー**: 重い処理をメインスレッドから分離
- **増分更新**: 変更された部分のみを更新

## アクセシビリティ

- キーボードナビゲーション対応
- スクリーンリーダーサポート
- 高コントラストモード
- カスタマイズ可能なフォントサイズ

## デプロイメント戦略

- Vercelへの静的サイトデプロイ
- PWA対応で通常のアプリケーションのような体験を提供

## 将来の拡張性

- 構文ハイライト対応
- マークダウンプレビュー
- テーマのカスタマイズ
- コラボレーション機能（必要に応じて）

## セキュリティ考慮事項

- クライアントサイドのみでデータを保持
- センシティブな操作のサニタイズ
- CSP（Content Security Policy）の適用

## 開発ロードマップ

1. **フェーズ1**: コアエディタとローカルストレージの実装
2. **フェーズ2**: UI/UXの洗練とパフォーマンス最適化
3. **フェーズ3**: 追加機能とユーザーフィードバックに基づく改善